<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Redis基础命令Generic：通用命令1.DEL命令1DEL key [key ...]   命令复杂度: 删除键的复杂度为 O(N)，其中 N 是要删除的键的数量。如果要删除的键包含的不是string，那么该键的复杂度为 O(M)，其中 M 是list、set、sorted set或hash中的元素数量。删除单个包含string的键的复杂度为 O(1)。 删除操作: 指定的键会被删除。如果键">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis基础命令">
<meta property="og:url" content="https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/index.html">
<meta property="og:site_name" content="大军的秘密花园">
<meta property="og:description" content="Redis基础命令Generic：通用命令1.DEL命令1DEL key [key ...]   命令复杂度: 删除键的复杂度为 O(N)，其中 N 是要删除的键的数量。如果要删除的键包含的不是string，那么该键的复杂度为 O(M)，其中 M 是list、set、sorted set或hash中的元素数量。删除单个包含string的键的复杂度为 O(1)。 删除操作: 指定的键会被删除。如果键">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://hulingf.github.io/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/%E8%B4%AD%E7%89%A9%E8%BD%A6.png">
<meta property="og:image" content="https://hulingf.github.io/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/image-20240901195902537.png">
<meta property="og:image" content="https://hulingf.github.io/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/image-20240901195929408.png">
<meta property="og:image" content="https://hulingf.github.io/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/image-20240901200635587.png">
<meta property="og:image" content="https://hulingf.github.io/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/image-20240901200711465.png">
<meta property="og:image" content="https://hulingf.github.io/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/image-20240901200749975.png">
<meta property="og:image" content="https://hulingf.github.io/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/image-20240901200829472.png">
<meta property="og:image" content="https://hulingf.github.io/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/image-20240901200906447.png">
<meta property="article:published_time" content="2024-04-17T09:05:06.296Z">
<meta property="article:modified_time" content="2024-09-01T12:27:06.050Z">
<meta property="article:author" content="hulingF">
<meta property="article:tag" content="Redis">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hulingf.github.io/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/%E8%B4%AD%E7%89%A9%E8%BD%A6.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Redis基础命令</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/tags/">Tag</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/hulingF">Projects</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2024/04/27/Kafka%E6%8A%80%E6%9C%AF%E6%8E%A2%E7%B4%A2/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2024/04/15/%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&text=Redis基础命令"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&title=Redis基础命令"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&is_video=false&description=Redis基础命令"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Redis基础命令&body=Check out this article: https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&title=Redis基础命令"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&title=Redis基础命令"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&title=Redis基础命令"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&title=Redis基础命令"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&name=Redis基础命令&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&t=Redis基础命令"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4"><span class="toc-number">1.</span> <span class="toc-text">Redis基础命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Generic%EF%BC%9A%E9%80%9A%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.</span> <span class="toc-text">Generic：通用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-DEL%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.DEL命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-EXISTS%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.2.</span> <span class="toc-text">2.EXISTS命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-EXPIRE%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.3.</span> <span class="toc-text">3.EXPIRE命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-KEYS%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.4.</span> <span class="toc-text">4.KEYS命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-OBJECT-ENCODING%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.5.</span> <span class="toc-text">5.OBJECT ENCODING命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-OBJECT-FREQ%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.6.</span> <span class="toc-text">6.OBJECT FREQ命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-PERSIST%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.7.</span> <span class="toc-text">7.PERSIST命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-RENAME%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.8.</span> <span class="toc-text">8.RENAME命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-SCAN%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.9.</span> <span class="toc-text">9.SCAN命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-TTL%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.10.</span> <span class="toc-text">10.TTL命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-TYPE%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.11.</span> <span class="toc-text">11.TYPE命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-UNLINK%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.12.</span> <span class="toc-text">12.UNLINK命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#String%EF%BC%9A%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.</span> <span class="toc-text">String：字符串命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-SET%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.SET命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-GET%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.GET命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-MSET%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.3.</span> <span class="toc-text">3.MSET命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-MGET%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.4.</span> <span class="toc-text">4.MGET命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-INCR%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.5.</span> <span class="toc-text">5.INCR命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-INCRBY%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.6.</span> <span class="toc-text">6.INCRBY命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-INCRBYFLOAT%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.7.</span> <span class="toc-text">7.INCRBYFLOAT命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-STRLEN%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.8.</span> <span class="toc-text">8.STRLEN命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hash%EF%BC%9A%E5%93%88%E5%B8%8C%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.</span> <span class="toc-text">Hash：哈希命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-HSET%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.HSET命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-HGET%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.HGET命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-HGETALL%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.HGETALL命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-HKEYS%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.4.</span> <span class="toc-text">4.HKEYS命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-HVALS%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.5.</span> <span class="toc-text">5.HVALS命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A%E8%B4%AD%E7%89%A9%E8%BD%A6"><span class="toc-number">1.3.6.</span> <span class="toc-text">6.应用场景：购物车</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#List%EF%BC%9A%E5%88%97%E8%A1%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.</span> <span class="toc-text">List：列表命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-LPUSH%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.1.</span> <span class="toc-text">1.LPUSH命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-LPOP%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.2.</span> <span class="toc-text">2.LPOP命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-LRANGE%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.3.</span> <span class="toc-text">3.LRANGE命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-LSET%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.LSET命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-LREM%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.5.</span> <span class="toc-text">5.LREM命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-LMPOP%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.6.</span> <span class="toc-text">6.LMPOP命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-BLPOP%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.7.</span> <span class="toc-text">7.BLPOP命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-LMOVE%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.8.</span> <span class="toc-text">8.LMOVE命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A%E5%8F%AF%E9%9D%A0%E9%98%9F%E5%88%97"><span class="toc-number">1.4.9.</span> <span class="toc-text">9.应用场景：可靠队列</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Set%EF%BC%9A%E9%9B%86%E5%90%88%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.</span> <span class="toc-text">Set：集合命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-SADD%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.1.</span> <span class="toc-text">1.SADD命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-SREM%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.2.</span> <span class="toc-text">2.SREM命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-SCARD%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.3.</span> <span class="toc-text">3.SCARD命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-SISMEMBER%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.4.</span> <span class="toc-text">4.SISMEMBER命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-SINTER%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.5.</span> <span class="toc-text">5.SINTER命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-SUNION%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.6.</span> <span class="toc-text">6.SUNION命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-SDIFF%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.7.</span> <span class="toc-text">7.SDIFF命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A%E6%8A%BD%E5%A5%96%E6%B4%BB%E5%8A%A8"><span class="toc-number">1.5.8.</span> <span class="toc-text">8.应用场景：抽奖活动</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sorted-Set%EF%BC%9A%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.</span> <span class="toc-text">Sorted Set：有序集合命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-ZADD%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.1.</span> <span class="toc-text">1.ZADD命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-ZREM%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.2.</span> <span class="toc-text">2.ZREM命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-ZSCORE%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.3.</span> <span class="toc-text">3.ZSCORE命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-ZRANK%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.4.</span> <span class="toc-text">4.ZRANK命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-ZCARD%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.5.</span> <span class="toc-text">5.ZCARD命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-ZCOUNT%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.6.</span> <span class="toc-text">6.ZCOUNT命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-ZINCRBY%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.7.</span> <span class="toc-text">7.ZINCRBY命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-ZRANGE%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.8.</span> <span class="toc-text">8.ZRANGE命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-ZREMRANGEBYSCORE%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.9.</span> <span class="toc-text">9.ZREMRANGEBYSCORE命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A%E6%8E%92%E8%A1%8C%E6%A6%9C"><span class="toc-number">1.6.10.</span> <span class="toc-text">10.应用场景：排行榜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Transactions%EF%BC%9A%E4%BA%8B%E5%8A%A1%E5%91%BD%E4%BB%A4"><span class="toc-number">1.7.</span> <span class="toc-text">Transactions：事务命令</span></a></li></ol></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        Redis基础命令
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">hulingF</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2024-04-17T09:05:06.296Z" class="dt-published" itemprop="datePublished">2024-04-17</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/Redis/" rel="tag">Redis</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <h1 id="Redis基础命令"><a href="#Redis基础命令" class="headerlink" title="Redis基础命令"></a>Redis基础命令</h1><h2 id="Generic：通用命令"><a href="#Generic：通用命令" class="headerlink" title="Generic：通用命令"></a>Generic：通用命令</h2><h3 id="1-DEL命令"><a href="#1-DEL命令" class="headerlink" title="1.DEL命令"></a>1.DEL命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DEL key [key ...]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 删除键的复杂度为 O(N)，其中 N 是要删除的键的数量。如果要删除的键包含的不是string，那么该键的复杂度为 O(M)，其中 M 是list、set、sorted set或hash中的元素数量。删除单个包含string的键的复杂度为 O(1)。</li>
<li><strong>删除操作</strong>: 指定的键会被删除。如果键不存在，则会被忽略。</li>
<li><strong>返回值</strong>: 命令执行后会返回一个整数回复，表示被删除的键的数量。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET key1 <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET key2 <span class="string">&quot;World&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">DEL key1 key2 key3</span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="2-EXISTS命令"><a href="#2-EXISTS命令" class="headerlink" title="2.EXISTS命令"></a>2.EXISTS命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXISTS key [key ...]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的复杂度为O(N)，其中N是要检查的键的数量。</li>
<li><strong>计数方式</strong>：如果在参数中多次提到同一个已存在的键，它将被多次计数。例如，如果<code>somekey</code>存在，那么<code>EXISTS somekey somekey</code>将返回2。</li>
<li><strong>返回值</strong>: 该命令返回指定参数中存在的键的数量。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET key1 <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">EXISTS key1</span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">EXISTS nosuchkey</span></span><br><span class="line">(integer) 0</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET key2 <span class="string">&quot;World&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">EXISTS key1 key2 nosuchkey</span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="3-EXPIRE命令"><a href="#3-EXPIRE命令" class="headerlink" title="3.EXPIRE命令"></a>3.EXPIRE命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPIRE key seconds [NX | XX | GT | LT]</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>命令复杂度</strong>: 该命令的复杂度为O(1)。</p>
</li>
<li><p><strong>键的超时</strong>：在Redis中，可以为键设置超时，超时后键会自动删除。使用超时的键通常被称为易失性键。</p>
</li>
<li><p><strong>持久化和重命名</strong>：使用<code>PERSIST</code>命令可以清除超时，将键转换为持久键。如果使用<code>RENAME</code>命令重命名键，关联的生存时间也会转移到新的键名。</p>
</li>
<li><p>这个命令支持一组选项：</p>
<ul>
<li><strong>NX</strong>：仅当键没有到期时间时设置到期时间</li>
<li><strong>XX</strong>：仅当键已经有到期时间时设置到期时间</li>
<li><strong>GT</strong>：仅当新的到期时间大于当前到期时间时设置到期时间</li>
<li><strong>LT</strong>：仅当新的到期时间小于当前到期时间时设置到期时间</li>
</ul>
</li>
<li><p><strong>返回值</strong>：对于已设置过期时间的键，EXPIRE 命令会返回 0，并且不会改变其过期时间。</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET mykey <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">EXPIRE mykey 10</span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">TTL mykey</span></span><br><span class="line">(integer) 10</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET mykey <span class="string">&quot;Hello World&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">TTL mykey</span></span><br><span class="line">(integer) -1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">EXPIRE mykey 10 XX</span></span><br><span class="line">(integer) 0</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">TTL mykey</span></span><br><span class="line">(integer) -1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">EXPIRE mykey 10 NX</span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">TTL mykey</span></span><br><span class="line">(integer) 10</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="4-KEYS命令"><a href="#4-KEYS命令" class="headerlink" title="4.KEYS命令"></a>4.KEYS命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">KEYS pattern</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的复杂度为O(N)，其中 N 是数据库中键的数量，假设数据库中的键名和给定的模式具有有限的长度。尽管该操作的时间复杂度为 O(N)，但常数时间相当低。例如，运行在入门级笔记本电脑上的 Redis 可以在 40 毫秒内扫描一个包含 100 万个键的数据库。</li>
<li>支持的 <code>glob</code> 风格模式：<ul>
<li><code>h?llo</code> 匹配 hello、hallo 和 hxllo</li>
<li><code>h*llo</code> 匹配 hllo 和 heeeello</li>
<li><code>h[ae]llo</code> 匹配 hello 和 hallo，但不匹配 hillo</li>
<li><code>h[^e]llo</code> 匹配 hallo、hbllo，但不匹配 hello</li>
<li><code>h[a-b]llo</code> 匹配 hallo 和 hbllo</li>
</ul>
</li>
<li><strong>返回值</strong>：该命令返回与指定模式匹配的所有键。</li>
</ul>
<blockquote>
<p>[!WARNING]</p>
<p>警告：请谨慎使用 <code>KEYS</code> 命令，只在生产环境中极度小心地使用。当对大型数据库执行该命令时，可能会影响性能。此命令旨在用于调试和特殊操作，比如更改键空间布局。不要在常规应用程序代码中使用 KEYS。如果要在键空间的子集中查找键，考虑使用 <code>SCAN</code> 或 <code>sets</code>。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">MSET firstname Jack lastname Stuntman age 35</span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">KEYS *name*</span></span><br><span class="line">1) &quot;firstname&quot;</span><br><span class="line">2) &quot;lastname&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">KEYS a??</span></span><br><span class="line">1) &quot;age&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">KEYS *</span></span><br><span class="line">1) &quot;age&quot;</span><br><span class="line">2) &quot;firstname&quot;</span><br><span class="line">3) &quot;lastname&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="5-OBJECT-ENCODING命令"><a href="#5-OBJECT-ENCODING命令" class="headerlink" title="5.OBJECT ENCODING命令"></a>5.OBJECT ENCODING命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OBJECT ENCODING key</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>命令复杂度</strong>: 该命令的复杂度为O(1)。</p>
</li>
<li><p><code>Strings</code>可以编码为：</p>
<ul>
<li><code>raw</code>：普通的字符串编码。</li>
<li><code>int</code>：表示在 64 位有符号区间内的整数的字符串，以此方式编码以节省空间。</li>
<li><code>embstr</code>：嵌入式字符串，是一个对象，其中内部的简单动态字符串是一个无法修改的字符串，分配在与redisObject本身相同的块中。embstr 可以是长度最多达到 <code>OBJ_ENCODING_EMBSTR_SIZE_LIMIT</code> 或 <code>44</code> 字节的字符串。</li>
</ul>
</li>
<li><p><code>Lists</code>可以编码为：</p>
<ul>
<li><code>linkedlist</code>：简单的列表编码。不再使用，是一个旧的列表编码。</li>
<li><code>ziplist</code>：Redis &lt;&#x3D; 6.2，用于小型列表的节省空间的编码。</li>
<li><code>listpack</code>：Redis &gt;&#x3D; 7.0，用于小型列表的节省空间的编码。</li>
<li><code>quicklist</code>：以 ziplists 或 listpacks 的 linkedlist 编码。</li>
</ul>
</li>
<li><p><code>Sets</code>可以编码为：</p>
<ul>
<li><code>hashtable</code>：普通的集合编码。</li>
<li><code>intset</code>：用于仅由整数组成的小型集合的特殊编码。</li>
<li><code>listpack</code>：Redis &gt;&#x3D; 7.2，用于小型集合的节省空间的编码。</li>
</ul>
</li>
<li><p><code>Hashes</code>可以编码为：</p>
<ul>
<li><code>hashtable</code>：普通的哈希编码。</li>
<li><code>ziplist</code>：Redis &lt;&#x3D; 6.2，用于小型哈希的节省空间的编码。</li>
<li><code>listpack</code>：Redis &gt;&#x3D; 7.0，用于小型哈希的节省空间的编码。</li>
</ul>
</li>
<li><p><code>Sorted Sets</code>可以编码为：</p>
<ul>
<li><code>skiplist</code>：普通的有序集合编码。</li>
<li><code>ziplist</code>：Redis &lt;&#x3D; 6.2，用于小型有序集合的节省空间的编码。</li>
<li><code>listpack</code>：Redis &gt;&#x3D; 7.0，用于小型有序集合的节省空间的编码。</li>
</ul>
</li>
<li><p><code>Streams</code>可以编码为：</p>
<ul>
<li><code>stream</code>：编码为 listpacks 的 radix 树。</li>
</ul>
</li>
<li><p><strong>返回值</strong>：返回存储在 <code>&lt;key&gt;</code> 处的 Redis 对象的内部编码。</p>
</li>
</ul>
<h3 id="6-OBJECT-FREQ命令"><a href="#6-OBJECT-FREQ命令" class="headerlink" title="6.OBJECT FREQ命令"></a>6.OBJECT FREQ命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OBJECT FREQ key</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的复杂度为O(1)。</li>
<li><strong>限制</strong>:该命令仅在 <code>maxmemory-policy</code> 配置指令设置为 <code>LFU</code> 策略之一时才可用。</li>
<li><strong>返回值</strong>：该命令返回存储在 <code>&lt;key&gt;</code> 处的 Redis 对象的<code>对数访问频率计数器</code>。</li>
</ul>
<h3 id="7-PERSIST命令"><a href="#7-PERSIST命令" class="headerlink" title="7.PERSIST命令"></a>7.PERSIST命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PERSIST key</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的复杂度为O(1)。</li>
<li><strong>作用</strong>：移除键上的现有超时，将键从易失性（设置了过期时间的键）变为持久性（不会过期的键，因为没有关联的超时）。</li>
<li><strong>返回值</strong>：<ul>
<li>如果键不存在或没有关联的超时，则返回 0。</li>
<li>如果超时已被移除，则返回 1。</li>
</ul>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET mykey <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">EXPIRE mykey 10</span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">TTL mykey</span></span><br><span class="line">(integer) 10</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">PERSIST mykey</span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">TTL mykey</span></span><br><span class="line">(integer) -1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="8-RENAME命令"><a href="#8-RENAME命令" class="headerlink" title="8.RENAME命令"></a>8.RENAME命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RENAME key newkey</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的复杂度为O(1)。</li>
<li><strong>作用</strong>：将键重命名为 newkey。当键不存在时，它会返回错误。如果 newkey 已经存在，它将被覆盖。在这种情况下，RENAME 将执行一个<code>隐式的 DEL 操作</code>，因此，即使 RENAME 本身通常是一个常数时间的操作，如果被删除的键包含一个非常大的值，也可能会导致高延迟。</li>
</ul>
<blockquote>
<p>[!WARNING]</p>
<p>在集群模式下，key 和 newkey 必须位于<code>相同的哈希槽</code>中，这意味着在实践中，只有具有相同<code>哈希标签</code>的键才能在集群中可靠地重命名。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET mykey <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">RENAME mykey myotherkey</span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">GET myotherkey</span></span><br><span class="line">&quot;Hello&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="9-SCAN命令"><a href="#9-SCAN命令" class="headerlink" title="9.SCAN命令"></a>9.SCAN命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SCAN cursor [MATCH pattern] [COUNT count] [TYPE type]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的复杂度为O(1)，对于完整的迭代，包括足够的命令调用使游标返回到0，时间复杂度为 O(N)，其中 N 是集合内的元素数量。</li>
<li>SCAN 命令及其紧密相关的命令 SSCAN、HSCAN 和 ZSCAN 用于逐步迭代一组元素：<ul>
<li><code>SCAN</code> 迭代当前选定的 Redis 数据库中的键集。</li>
<li><code>SSCAN</code> 迭代集合类型的元素。</li>
<li><code>HSCAN</code> 迭代哈希类型的字段及其关联的值。</li>
<li><code>ZSCAN</code> 迭代有序集合类型的元素及其关联的分数。</li>
</ul>
</li>
<li>注意，SCAN、SSCAN、HSCAN 和 ZSCAN 的工作方式非常相似，因此本文档涵盖了这四个命令。然而，明显的区别是在 SSCAN、HSCAN 和 ZSCAN 的情况下，第一个参数是持有 <code>Set</code>、<code>Hash</code> 或 <code>Sorted Set</code> 值的键名。SCAN 命令不需要任何键名参数，因为它迭代<code>当前数据库</code>中的键，所以被迭代的对象是数据库本身。</li>
</ul>
<blockquote>
<p>[!WARNING]</p>
<p>由于这些命令允许<code>增量迭代</code>，每次只返回少量元素，因此它们可以在<code>生产环境中使用</code>，而不会像 KEYS 或 SMEMBERS 命令那样产生一些不利的影响，当对大型键集或元素集合调用时，可能会导致服务器阻塞很长时间（甚至几秒钟）。</p>
<p>然而，尽管像 SMEMBERS 这样的阻塞命令能够提供在给定时刻作为集合一部分的所有元素，但是 SCAN 系列命令只能对返回的元素提供有限的保证，因为在迭代过程中我们增量迭代的集合可能会发生变化。</p>
</blockquote>
<p>SCAN 是<code>基于游标的迭代器</code>。这意味着在每次调用命令时，服务器都会返回一个<code>更新后的游标</code>，用户需要将其作为下一次调用中的游标参数使用。迭代从将游标设置为 0 开始，并在服务器返回的游标为 0 时终止。以下是 SCAN 迭代的示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; scan 0</span><br><span class="line">1) &quot;17&quot;</span><br><span class="line">2)  1) &quot;key:12&quot;</span><br><span class="line">    2) &quot;key:8&quot;</span><br><span class="line">    3) &quot;key:4&quot;</span><br><span class="line">    4) &quot;key:14&quot;</span><br><span class="line">    5) &quot;key:16&quot;</span><br><span class="line">    6) &quot;key:17&quot;</span><br><span class="line">    7) &quot;key:15&quot;</span><br><span class="line">    8) &quot;key:10&quot;</span><br><span class="line">    9) &quot;key:3&quot;</span><br><span class="line">   10) &quot;key:7&quot;</span><br><span class="line">   11) &quot;key:1&quot;</span><br><span class="line">redis 127.0.0.1:6379&gt; scan 17</span><br><span class="line">1) &quot;0&quot;</span><br><span class="line">2) 1) &quot;key:5&quot;</span><br><span class="line">   2) &quot;key:18&quot;</span><br><span class="line">   3) &quot;key:0&quot;</span><br><span class="line">   4) &quot;key:2&quot;</span><br><span class="line">   5) &quot;key:19&quot;</span><br><span class="line">   6) &quot;key:13&quot;</span><br><span class="line">   7) &quot;key:6&quot;</span><br><span class="line">   8) &quot;key:9&quot;</span><br><span class="line">   9) &quot;key:11&quot;</span><br></pre></td></tr></table></figure>

<h3 id="10-TTL命令"><a href="#10-TTL命令" class="headerlink" title="10.TTL命令"></a>10.TTL命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TTL key</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的复杂度为O(1)。</li>
<li><strong>返回值</strong>：<ul>
<li>以秒为单位的 TTL。</li>
<li>如果键存在但没有关联的到期时间，则返回 -1。</li>
<li>如果键不存在，则返回 -2。</li>
</ul>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET mykey <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">EXPIRE mykey 10</span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">TTL mykey</span></span><br><span class="line">(integer) 10</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="11-TYPE命令"><a href="#11-TYPE命令" class="headerlink" title="11.TYPE命令"></a>11.TYPE命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TYPE key</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的复杂度为O(1)。</li>
<li><strong>返回值</strong>：返回存储在键中值的类型的字符串表示。可能返回的不同类型包括：string（字符串）、list（列表）、set（集合）、zset（有序集合）、hash（哈希）和 stream（流）。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET key1 <span class="string">&quot;value&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LPUSH key2 <span class="string">&quot;value&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key3 <span class="string">&quot;value&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">TYPE key1</span></span><br><span class="line">&quot;string&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">TYPE key2</span></span><br><span class="line">&quot;list&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">TYPE key3</span></span><br><span class="line">&quot;set&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="12-UNLINK命令"><a href="#12-UNLINK命令" class="headerlink" title="12.UNLINK命令"></a>12.UNLINK命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UNLINK key [key ...]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：每次删除键都是 O(1)的时间复杂度，无论其大小如何。然后，命令会在<code>不同的线程</code>中执行 O(N) 的工作以回收内存，其中 N 是被删除对象所包含的元素数量。</li>
<li><strong>作用</strong>：该命令与 DEL 非常相似，它会删除指定的键。就像 DEL 一样，如果键不存在，则会被忽略。然而，该命令会在不同的线程中执行实际的内存回收，因此它<code>不会阻塞</code>，而 DEL 会。这就是命令名称的由来：该命令只是从键空间中取消链接键。实际的删除操作会稍后以<code>异步</code>方式进行。</li>
<li><strong>返回值</strong>：返回已取消链接的键的数量。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET key1 <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET key2 <span class="string">&quot;World&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">UNLINK key1 key2 key3</span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h2 id="String：字符串命令"><a href="#String：字符串命令" class="headerlink" title="String：字符串命令"></a>String：字符串命令</h2><h3 id="1-SET命令"><a href="#1-SET命令" class="headerlink" title="1.SET命令"></a>1.SET命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET key value [NX | XX] [GET] [EX seconds | PX milliseconds | EXAT unix-time-seconds | PXAT unix-time-milliseconds | KEEPTTL]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的复杂度为O(1)。</li>
<li><strong>作用</strong>：将键设置为保存字符串值。如果键已经保存了一个值，则无论其类型如何都会被覆盖。在成功的 SET 操作中，与键关联的任何先前的过期时间都将被丢弃。</li>
<li>SET 命令支持一组选项，修改其行为：<ul>
<li><code>EX seconds</code>：设置指定的到期时间，单位为秒（正整数）。</li>
<li><code>PX milliseconds</code>：设置指定的到期时间，单位为毫秒（正整数）。</li>
<li><code>EXAT timestamp-seconds</code>：设置键在指定的 Unix 时间点到期，单位为秒（正整数）。</li>
<li><code>PXAT timestamp-milliseconds</code>：设置键在指定的 Unix 时间点到期，单位为毫秒（正整数）。</li>
<li><code>NX</code>：仅当键不存在时设置键。</li>
<li><code>XX</code>：仅当键已存在时设置键。</li>
<li><code>KEEPTTL</code>：保留与键关联的到期时间。</li>
<li><code>GET</code>：返回键处存储的旧字符串值，如果键不存在，则返回 nil。如果键处存储的值不是字符串，则返回错误并且 SET 操作中止。</li>
</ul>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET mykey <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">GET mykey</span></span><br><span class="line">&quot;Hello&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET anotherkey <span class="string">&quot;will expire in a minute&quot;</span> EX 60</span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="2-GET命令"><a href="#2-GET命令" class="headerlink" title="2.GET命令"></a>2.GET命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET key</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的复杂度为O(1)。</li>
<li><strong>返回值</strong>：获取键的值。如果键不存在，则返回特殊值 nil。如果存储在键处的值不是字符串，则返回错误，因为 GET 只处理字符串值。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">GET nonexisting</span></span><br><span class="line">(nil)</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET mykey <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">GET mykey</span></span><br><span class="line">&quot;Hello&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="3-MSET命令"><a href="#3-MSET命令" class="headerlink" title="3.MSET命令"></a>3.MSET命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MSET key value [key value ...]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的复杂度为O(N)，其中 N 是键值对的个数。</li>
<li><strong>作用</strong>：将给定的键设置为它们各自的值。MSET 将现有的值替换为新值，就像普通的 SET 一样。如果不想覆盖现有值，请参见 MSETNX。</li>
</ul>
<blockquote>
<p>MSET 是原子的，因此所有给定的键都会<code>同时设置</code>。客户端无法看到某些键已更新而其他键保持不变。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">MSET key1 <span class="string">&quot;Hello&quot;</span> key2 <span class="string">&quot;World&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">GET key1</span></span><br><span class="line">&quot;Hello&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">GET key2</span></span><br><span class="line">&quot;World&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="4-MGET命令"><a href="#4-MGET命令" class="headerlink" title="4.MGET命令"></a>4.MGET命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MGET key [key ...]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的复杂度为O(N)，其中 N 是取出的键值对的个数。</li>
<li><strong>返回值</strong>：返回所有指定键的值。对于每个不持有字符串值或不存在的键，都返回特殊值 nil。因此，该操作永远不会失败。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET key1 <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET key2 <span class="string">&quot;World&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">MGET key1 key2 nonexisting</span></span><br><span class="line">1) &quot;Hello&quot;</span><br><span class="line">2) &quot;World&quot;</span><br><span class="line">3) (nil)</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="5-INCR命令"><a href="#5-INCR命令" class="headerlink" title="5.INCR命令"></a>5.INCR命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INCR key</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的复杂度为O(1)。</li>
<li><strong>作用</strong>：将存储在键处的数字增加一。<code>如果键不存在，则在执行操作之前将其设置为 0</code>。如果键包含错误类型的值或包含无法表示为整数的字符串，则返回错误。此操作仅限于 64 位有符号整数。</li>
<li><strong>返回值</strong>：返回递增后的整数值。</li>
</ul>
<blockquote>
<p>注意：这是一个字符串操作，因为 Redis 没有专门的整数类型。存储在键处的字符串被解释为一个十进制 64 位有符号整数来执行操作。Redis 使用int编码方案表示整数，因此对于实际保存整数的字符串值，存储字符串表示形式的整数不会产生额外开销。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET mykey <span class="string">&quot;10&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">INCR mykey</span></span><br><span class="line">(integer) 11</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">GET mykey</span></span><br><span class="line">&quot;11&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="6-INCRBY命令"><a href="#6-INCRBY命令" class="headerlink" title="6.INCRBY命令"></a>6.INCRBY命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INCRBY key increment</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的复杂度为O(1)。</li>
<li><strong>作用</strong>：将存储在键处的数字增加指定的增量。<code>如果键不存在，则在执行操作之前将其设置为 0</code>。如果键包含错误类型的值或包含无法表示为整数的字符串，则返回错误。此操作仅限于 64 位有符号整数。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET mykey <span class="string">&quot;10&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">INCRBY mykey 5</span></span><br><span class="line">(integer) 15</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="7-INCRBYFLOAT命令"><a href="#7-INCRBYFLOAT命令" class="headerlink" title="7.INCRBYFLOAT命令"></a>7.INCRBYFLOAT命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INCRBYFLOAT key increment</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>命令复杂度</strong>: 该命令的复杂度为O(1)。</p>
</li>
<li><p><strong>作用</strong>：将存储在键中的表示浮点数的字符串按指定的增量递增。通过使用负的增量值，结果是将键处存储的值递减。<code>如果键不存在，则在执行操作之前将其设置为 0</code>。如果发生以下条件之一，则返回错误：</p>
<ul>
<li>键包含错误类型的值（不是字符串）。</li>
<li>当前键内容或指定的增量无法解析为双精度浮点数。</li>
</ul>
<p>如果命令成功，则将新的递增值存储为键的新值（替换旧值），并作为字符串返回给调用者。</p>
<p>字符串键中已包含的值和递增参数都可以选择以指数表示法提供，但是在递增之后计算的值始终以相同的格式存储，即一个整数数字，后跟（如果需要）一个点，以及表示数字小数部分的变长数字。尾随的零总是被删除。</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET mykey 10.50</span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">INCRBYFLOAT mykey 0.1</span></span><br><span class="line">&quot;10.6&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">INCRBYFLOAT mykey -5</span></span><br><span class="line">&quot;5.6&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET mykey 5.0e3</span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">INCRBYFLOAT mykey 2.0e2</span></span><br><span class="line">&quot;5200&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="8-STRLEN命令"><a href="#8-STRLEN命令" class="headerlink" title="8.STRLEN命令"></a>8.STRLEN命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STRLEN key</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的复杂度为O(1)。</li>
<li><strong>返回值</strong>：返回存储在键处的字符串值的长度。当键持有非字符串值时，返回错误。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SET mykey <span class="string">&quot;Hello world&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">STRLEN mykey</span></span><br><span class="line">(integer) 11</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">STRLEN nonexisting</span></span><br><span class="line">(integer) 0</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h2 id="Hash：哈希命令"><a href="#Hash：哈希命令" class="headerlink" title="Hash：哈希命令"></a>Hash：哈希命令</h2><h3 id="1-HSET命令"><a href="#1-HSET命令" class="headerlink" title="1.HSET命令"></a>1.HSET命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HSET key field value [field value ...]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：每添加一个键值对的时间复杂度为 O(1)，因此当命令以多个键值对调用时，添加 N 个键值对的时间复杂度为 O(N)。</li>
<li><strong>作用</strong>：该命令将覆盖哈希中存在的指定字段的值。如果键不存在，则创建一个持有哈希的新键。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HSET myhash field1 <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HGET myhash field1</span></span><br><span class="line">&quot;Hello&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HSET myhash field2 <span class="string">&quot;Hi&quot;</span> field3 <span class="string">&quot;World&quot;</span></span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HGET myhash field2</span></span><br><span class="line">&quot;Hi&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HGET myhash field3</span></span><br><span class="line">&quot;World&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HGETALL myhash</span></span><br><span class="line">1) &quot;field1&quot;</span><br><span class="line">2) &quot;Hello&quot;</span><br><span class="line">3) &quot;field2&quot;</span><br><span class="line">4) &quot;Hi&quot;</span><br><span class="line">5) &quot;field3&quot;</span><br><span class="line">6) &quot;World&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="2-HGET命令"><a href="#2-HGET命令" class="headerlink" title="2.HGET命令"></a>2.HGET命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HGET key field</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的复杂度为O(1)。</li>
<li><strong>返回值</strong>：返回 key 所对应的 hash 结构的 field 字段的值。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HSET myhash field1 <span class="string">&quot;foo&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HGET myhash field1</span></span><br><span class="line">&quot;foo&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HGET myhash field2</span></span><br><span class="line">(nil)</span><br><span class="line"><span class="meta prompt_">redis&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-HGETALL命令"><a href="#3-HGETALL命令" class="headerlink" title="3.HGETALL命令"></a>3.HGETALL命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HGETALL key</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的时间复杂度为 O(N)，其中 N 是哈希表的大小。</li>
<li><strong>返回值</strong>：返回存储在键中的哈希表的所有字段和值。在返回的值中，每个字段名都跟随其值，因此回复的长度是哈希表大小的两倍。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HSET myhash field1 <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HSET myhash field2 <span class="string">&quot;World&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HGETALL myhash</span></span><br><span class="line">1) &quot;field1&quot;</span><br><span class="line">2) &quot;Hello&quot;</span><br><span class="line">3) &quot;field2&quot;</span><br><span class="line">4) &quot;World&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="4-HKEYS命令"><a href="#4-HKEYS命令" class="headerlink" title="4.HKEYS命令"></a>4.HKEYS命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HKEYS key</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的时间复杂度为 O(N)，其中 N 是哈希表的大小。</li>
<li><strong>返回值</strong>：返回存储在键中的哈希表中的所有字段名。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HSET myhash field1 <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HSET myhash field2 <span class="string">&quot;World&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HKEYS myhash</span></span><br><span class="line">1) &quot;field1&quot;</span><br><span class="line">2) &quot;field2&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="5-HVALS命令"><a href="#5-HVALS命令" class="headerlink" title="5.HVALS命令"></a>5.HVALS命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HVALS key</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>: 该命令的时间复杂度为 O(N)，其中 N 是哈希表的大小。</li>
<li><strong>返回值</strong>：返回存储在键中的哈希表中的所有字段值。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HSET myhash field1 <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HSET myhash field2 <span class="string">&quot;World&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">HVALS myhash</span></span><br><span class="line">1) &quot;Hello&quot;</span><br><span class="line">2) &quot;World&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="6-应用场景：购物车"><a href="#6-应用场景：购物车" class="headerlink" title="6.应用场景：购物车"></a>6.应用场景：购物车</h3><p>以用户 id 为 key，商品 id 为 field，商品数量为 value，恰好构成了购物车的3个要素，如下图所示。</p>
<p><img src="/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/%E8%B4%AD%E7%89%A9%E8%BD%A6.png" alt="img"></p>
<p>涉及到的相关命令：</p>
<ul>
<li>添加商品：<code>HSET cart:&#123;userId&#125; &#123;productId&#125; 1</code></li>
<li>添加数量：<code>HINCRBY cart:&#123;userId&#125; &#123;productId&#125; 1</code></li>
<li>商品总数：<code>HLEN cart:&#123;userId&#125;</code></li>
<li>删除商品：<code>HDEL cart:&#123;userId&#125; &#123;productId&#125;</code></li>
<li>获取购物车所有商品：<code>HGETALL cart:&#123;userId&#125;</code></li>
</ul>
<p>当前仅仅是将商品ID存储到了Redis中，在回显商品显示信息时还需要回表查数据库，获取完整的商品信息。</p>
<h2 id="List：列表命令"><a href="#List：列表命令" class="headerlink" title="List：列表命令"></a>List：列表命令</h2><h3 id="1-LPUSH命令"><a href="#1-LPUSH命令" class="headerlink" title="1.LPUSH命令"></a>1.LPUSH命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LPUSH key element [element ...]</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>命令复杂度</strong>：每添加一个元素的时间复杂度为 O(1)，因此当命令以多个参数调用时，添加 N 个元素的时间复杂度为 O(N)。</p>
</li>
<li><p><strong>作用</strong>：将所有指定的值插入到存储在键中的列表的头部。如果键不存在，则在执行推送操作之前将其创建为空列表。当键包含的值不是列表时，返回错误。</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LPUSH mylist <span class="string">&quot;world&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LPUSH mylist <span class="string">&quot;hello&quot;</span></span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LRANGE mylist 0 -1</span></span><br><span class="line">1) &quot;hello&quot;</span><br><span class="line">2) &quot;world&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="2-LPOP命令"><a href="#2-LPOP命令" class="headerlink" title="2.LPOP命令"></a>2.LPOP命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LPOP key [count]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为 O(N)，其中 N 是返回元素的数量。</li>
<li><strong>作用</strong>：移除并返回存储在键中的列表的第一个元素。默认情况下，该命令从列表开头弹出单个元素。当提供可选的 <code>count</code> 参数时，返回的结果将包含最多 count 个元素，取决于列表的长度。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">RPUSH mylist <span class="string">&quot;one&quot;</span> <span class="string">&quot;two&quot;</span> <span class="string">&quot;three&quot;</span> <span class="string">&quot;four&quot;</span> <span class="string">&quot;five&quot;</span></span></span><br><span class="line">(integer) 5</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LPOP mylist</span></span><br><span class="line">&quot;one&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LPOP mylist 2</span></span><br><span class="line">1) &quot;two&quot;</span><br><span class="line">2) &quot;three&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LRANGE mylist 0 -1</span></span><br><span class="line">1) &quot;four&quot;</span><br><span class="line">2) &quot;five&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="3-LRANGE命令"><a href="#3-LRANGE命令" class="headerlink" title="3.LRANGE命令"></a>3.LRANGE命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LRANGE key start stop</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为 O(S+N)，其中 S 是 start 偏移量与头部的距离(针对小型列表)或 start 偏移量与最近的头尾的距离(针对大型列表，加快遍历速度)，N 是范围内元素的数量。</li>
<li><strong>返回值</strong>：返回存储在键中的列表的指定元素。起始偏移量和停止偏移量是从零开始的索引，其中 0 表示列表的第一个元素（列表的头部），1 表示下一个元素，依此类推。这些偏移量也可以是负数，表示从列表末尾开始的偏移量。例如，-1 表示列表的最后一个元素，-2 表示倒数第二个元素，依此类推。</li>
</ul>
<blockquote>
<p>超出范围的索引不会产生错误。如果起始索引大于列表的末尾，则返回一个空列表。如果停止索引大于列表的实际末尾，Redis 将把它视为列表的最后一个元素。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">RPUSH mylist <span class="string">&quot;one&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">RPUSH mylist <span class="string">&quot;two&quot;</span></span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">RPUSH mylist <span class="string">&quot;three&quot;</span></span></span><br><span class="line">(integer) 3</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LRANGE mylist 0 0</span></span><br><span class="line">1) &quot;one&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LRANGE mylist -3 2</span></span><br><span class="line">1) &quot;one&quot;</span><br><span class="line">2) &quot;two&quot;</span><br><span class="line">3) &quot;three&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LRANGE mylist -100 100</span></span><br><span class="line">1) &quot;one&quot;</span><br><span class="line">2) &quot;two&quot;</span><br><span class="line">3) &quot;three&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LRANGE mylist 5 10</span></span><br><span class="line">(empty array)</span><br><span class="line"><span class="meta prompt_">redis&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-LSET命令"><a href="#4-LSET命令" class="headerlink" title="4.LSET命令"></a>4.LSET命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LSET key index element</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>命令复杂度</strong>：该命令的时间复杂度为 O(N)，其中 N 是列表的长度。将列表的第一个或最后一个元素设置为 O(1)。</p>
</li>
<li><p><strong>作用</strong>：将列表中索引位置的元素设置为指定的值。</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">RPUSH mylist <span class="string">&quot;one&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">RPUSH mylist <span class="string">&quot;two&quot;</span></span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">RPUSH mylist <span class="string">&quot;three&quot;</span></span></span><br><span class="line">(integer) 3</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LSET mylist 0 <span class="string">&quot;four&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LSET mylist -2 <span class="string">&quot;five&quot;</span></span></span><br><span class="line">&quot;OK&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LRANGE mylist 0 -1</span></span><br><span class="line">1) &quot;four&quot;</span><br><span class="line">2) &quot;five&quot;</span><br><span class="line">3) &quot;three&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-LREM命令"><a href="#5-LREM命令" class="headerlink" title="5.LREM命令"></a>5.LREM命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LREM key count element</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为 O(N+M)，其中 N 是列表长度，M 是删除元素数量。</li>
<li>从存储在键中的列表中移除前 <code>count</code> 次出现的与指定元素相等的元素。count 参数影响操作的方式如下：<ul>
<li><code>count &gt; 0</code>：<code>从头到尾</code>移除与元素相等的元素。</li>
<li><code>count &lt; 0</code>：<code>从尾到头</code>移除与元素相等的元素。</li>
<li><code>count = 0</code>：移除<code>所有</code>与元素相等的元素。</li>
</ul>
</li>
</ul>
<blockquote>
<p>注意，不存在的键被视为空列表，因此当键不存在时，该命令将始终返回 0。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">RPUSH mylist <span class="string">&quot;hello&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">RPUSH mylist <span class="string">&quot;hello&quot;</span></span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">RPUSH mylist <span class="string">&quot;foo&quot;</span></span></span><br><span class="line">(integer) 3</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">RPUSH mylist <span class="string">&quot;hello&quot;</span></span></span><br><span class="line">(integer) 4</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LREM mylist -2 <span class="string">&quot;hello&quot;</span></span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LRANGE mylist 0 -1</span></span><br><span class="line">1) &quot;hello&quot;</span><br><span class="line">2) &quot;foo&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="6-LMPOP命令"><a href="#6-LMPOP命令" class="headerlink" title="6.LMPOP命令"></a>6.LMPOP命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LMPOP numkeys key [key ...] &lt;LEFT | RIGHT&gt; [COUNT count]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为 O(N+M)，其中 N 是提供的key的个数，M 是返回元素的数量。</li>
<li><strong>作用</strong>：根据传递的参数，从<code>第一个非空列表</code>的左侧或右侧弹出元素。返回的元素数量受到非空列表长度和 count 参数（默认为 1）中较小者的限制。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LMPOP 2 non1 non2 LEFT COUNT 10</span></span><br><span class="line">(error) object of type &#x27;NoneType&#x27; has no len()</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LPUSH mylist <span class="string">&quot;one&quot;</span> <span class="string">&quot;two&quot;</span> <span class="string">&quot;three&quot;</span> <span class="string">&quot;four&quot;</span> <span class="string">&quot;five&quot;</span></span></span><br><span class="line">(integer) 5</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LMPOP 1 mylist LEFT</span></span><br><span class="line">1) &quot;mylist&quot;</span><br><span class="line">2) 1) &quot;five&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LRANGE mylist 0 -1</span></span><br><span class="line">1) &quot;four&quot;</span><br><span class="line">2) &quot;three&quot;</span><br><span class="line">3) &quot;two&quot;</span><br><span class="line">4) &quot;one&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LMPOP 1 mylist RIGHT COUNT 10</span></span><br><span class="line">1) &quot;mylist&quot;</span><br><span class="line">2) 1) &quot;one&quot;</span><br><span class="line">   2) &quot;two&quot;</span><br><span class="line">   3) &quot;three&quot;</span><br><span class="line">   4) &quot;four&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LPUSH mylist <span class="string">&quot;one&quot;</span> <span class="string">&quot;two&quot;</span> <span class="string">&quot;three&quot;</span> <span class="string">&quot;four&quot;</span> <span class="string">&quot;five&quot;</span></span></span><br><span class="line">(integer) 5</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LPUSH mylist2 <span class="string">&quot;a&quot;</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;c&quot;</span> <span class="string">&quot;d&quot;</span> <span class="string">&quot;e&quot;</span></span></span><br><span class="line">(integer) 5</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LMPOP 2 mylist mylist2 right count 3</span></span><br><span class="line">1) &quot;mylist&quot;</span><br><span class="line">2) 1) &quot;one&quot;</span><br><span class="line">   2) &quot;two&quot;</span><br><span class="line">   3) &quot;three&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LRANGE mylist 0 -1</span></span><br><span class="line">1) &quot;five&quot;</span><br><span class="line">2) &quot;four&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LMPOP 2 mylist mylist2 right count 5</span></span><br><span class="line">1) &quot;mylist&quot;</span><br><span class="line">2) 1) &quot;four&quot;</span><br><span class="line">   2) &quot;five&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LMPOP 2 mylist mylist2 right count 10</span></span><br><span class="line">1) &quot;mylist2&quot;</span><br><span class="line">2) 1) &quot;a&quot;</span><br><span class="line">   2) &quot;b&quot;</span><br><span class="line">   3) &quot;c&quot;</span><br><span class="line">   4) &quot;d&quot;</span><br><span class="line">   5) &quot;e&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">EXISTS mylist mylist2</span></span><br><span class="line">(integer) 0</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="7-BLPOP命令"><a href="#7-BLPOP命令" class="headerlink" title="7.BLPOP命令"></a>7.BLPOP命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BLPOP key [key ...] timeout</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为 O(N)，其中 N 是提供的key的个数。</li>
<li><strong>作用</strong>：BLPOP 是一个<code>阻塞列表弹出原语</code>。它是 LPOP 的阻塞版本，因为当给定列表中没有任何元素可弹出时，它会阻塞连接。从第一个非空列表的头部弹出一个元素，并按照给定的顺序检查给定的键。</li>
</ul>
<h3 id="8-LMOVE命令"><a href="#8-LMOVE命令" class="headerlink" title="8.LMOVE命令"></a>8.LMOVE命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LMOVE source destination &lt;LEFT | RIGHT&gt; &lt;LEFT | RIGHT&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为 O(1)。</li>
<li><strong>作用</strong>：原子地返回并移除存储在源列表（source）中的第一个&#x2F;最后一个元素（头部&#x2F;尾部取决于 <code>wherefrom</code> 参数），并将该元素推送到存储在目标列表（destination）中的第一个&#x2F;最后一个位置（头部&#x2F;尾部取决于 <code>whereto</code> 参数）。例如：假设源列表（source）包含列表 a、b、c，目标列表（destination）包含列表 x、y、z。执行 LMOVE source destination RIGHT LEFT 将导致源列表包含 a、b，目标列表包含 c、x、y、z。</li>
</ul>
<blockquote>
<p>如果源列表不存在，则返回值为 nil，且不执行任何操作。如果源列表和目标列表相同，则操作相当于从列表中移除第一个&#x2F;最后一个元素，并将其推送为列表的第一个&#x2F;最后一个元素，因此可以将其视为列表旋转命令（或者如果 wherefrom 与 whereto 相同，则视为无操作）。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">RPUSH mylist <span class="string">&quot;one&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">RPUSH mylist <span class="string">&quot;two&quot;</span></span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">RPUSH mylist <span class="string">&quot;three&quot;</span></span></span><br><span class="line">(integer) 3</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LMOVE mylist myotherlist RIGHT LEFT</span></span><br><span class="line">&quot;three&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LMOVE mylist myotherlist LEFT RIGHT</span></span><br><span class="line">&quot;one&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LRANGE mylist 0 -1</span></span><br><span class="line">1) &quot;two&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">LRANGE myotherlist 0 -1</span></span><br><span class="line">1) &quot;three&quot;</span><br><span class="line">2) &quot;one&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="9-应用场景：可靠队列"><a href="#9-应用场景：可靠队列" class="headerlink" title="9.应用场景：可靠队列"></a>9.应用场景：<code>可靠队列</code></h3><p>Redis通常被用作消息服务器来实现后台作业处理或其他类型的消息任务。一个简单的队列通常通过在生产者端将值推入列表中来获得，然后在消费者端使用RPOP（使用轮询）或BRPOP（如果客户端更适合使用阻塞操作）来等待这些值。然而，在这种情况下，获得的队列是不可靠的，因为<code>消息可能会丢失</code>，例如在存在网络问题或者在消息被接收但仍需处理时消费者崩溃。</p>
<blockquote>
<p>LMOVE（或其阻塞变体BLMOVE）提供了一种避免这个问题的方法：<code>消费者获取消息的同时将其推送到一个处理列表中</code>，一旦消息已经被成功处理，可以使用<code>LREM</code>命令从处理列表中删除消息。一个额外的客户端可以<code>监视处理列表中停留时间过长的项目</code>，并在需要时将这些超时的项目再次推送回队列中。</p>
</blockquote>
<h2 id="Set：集合命令"><a href="#Set：集合命令" class="headerlink" title="Set：集合命令"></a>Set：集合命令</h2><h3 id="1-SADD命令"><a href="#1-SADD命令" class="headerlink" title="1.SADD命令"></a>1.SADD命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SADD key member [member ...]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：每次添加元素的时间复杂度为O(1)，因此当命令同时使用多个参数调用时，添加N个元素的时间复杂度为O(N)。</li>
<li><strong>作用</strong>：将指定的成员添加到存储在键中的集合中。已经是该集合成员的指定成员将被忽略。如果键不存在，则在添加指定成员之前将创建一个新的集合。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD myset <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD myset <span class="string">&quot;World&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD myset <span class="string">&quot;World&quot;</span></span></span><br><span class="line">(integer) 0</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SMEMBERS myset</span></span><br><span class="line">1) &quot;Hello&quot;</span><br><span class="line">2) &quot;World&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="2-SREM命令"><a href="#2-SREM命令" class="headerlink" title="2.SREM命令"></a>2.SREM命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SREM key member [member ...]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为 O(N)，其中 N 是要移除的元素数量。</li>
<li><strong>作用</strong>;该命令从存储在 key 中的集合中移除指定的成员。被指定移除的成员如果不是该集合的成员，则被忽略。如果 key 不存在，那么它会被视为空集合，并且该命令返回 0。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD myset <span class="string">&quot;one&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD myset <span class="string">&quot;two&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD myset <span class="string">&quot;three&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SREM myset <span class="string">&quot;one&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SREM myset <span class="string">&quot;four&quot;</span></span></span><br><span class="line">(integer) 0</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SMEMBERS myset</span></span><br><span class="line">1) &quot;two&quot;</span><br><span class="line">2) &quot;three&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="3-SCARD命令"><a href="#3-SCARD命令" class="headerlink" title="3.SCARD命令"></a>3.SCARD命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SCARD key</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为 O(1)。</li>
<li><strong>返回值</strong>：返回存储在 key 对应的集合的元素数量。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD myset <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD myset <span class="string">&quot;World&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SCARD myset</span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="4-SISMEMBER命令"><a href="#4-SISMEMBER命令" class="headerlink" title="4.SISMEMBER命令"></a>4.SISMEMBER命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SISMEMBER key member</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为 O(1)。</li>
<li><strong>返回值</strong>：返回 member 是否是存储在 key 中的集合的成员。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD myset <span class="string">&quot;one&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SISMEMBER myset <span class="string">&quot;one&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SISMEMBER myset <span class="string">&quot;two&quot;</span></span></span><br><span class="line">(integer) 0</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="5-SINTER命令"><a href="#5-SINTER命令" class="headerlink" title="5.SINTER命令"></a>5.SINTER命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SINTER key [key ...]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：在最坏的情况下，时间复杂度为 O(N*M)，其中 N 是最小集合的基数，而 M 是集合的数量。</li>
<li><strong>返回值</strong>：返回由所有给定集合的交集产生的集合的成员。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key1 <span class="string">&quot;b&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key1 <span class="string">&quot;c&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key2 <span class="string">&quot;c&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key2 <span class="string">&quot;d&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key2 <span class="string">&quot;e&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SINTER key1 key2</span></span><br><span class="line">1) &quot;c&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="6-SUNION命令"><a href="#6-SUNION命令" class="headerlink" title="6.SUNION命令"></a>6.SUNION命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SUNION key [key ...]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为 O(1)，其中 N 是给定的所有集合的元素数量之和。</li>
<li><strong>返回值</strong>：返回由所有给定集合的并集产生的集合的成员。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key1 <span class="string">&quot;a&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key1 <span class="string">&quot;b&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key1 <span class="string">&quot;c&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key2 <span class="string">&quot;c&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key2 <span class="string">&quot;d&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key2 <span class="string">&quot;e&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SUNION key1 key2</span></span><br><span class="line">1) &quot;a&quot;</span><br><span class="line">2) &quot;b&quot;</span><br><span class="line">3) &quot;c&quot;</span><br><span class="line">4) &quot;d&quot;</span><br><span class="line">5) &quot;e&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="7-SDIFF命令"><a href="#7-SDIFF命令" class="headerlink" title="7.SDIFF命令"></a>7.SDIFF命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SDIFF key [key ...]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为 O(1)，其中 N 是给定的所有集合的元素数量之和。</li>
<li><strong>返回值</strong>：返回第一个集合与所有后续集合之间差异的成员。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key1 <span class="string">&quot;a&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key1 <span class="string">&quot;b&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key1 <span class="string">&quot;c&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key2 <span class="string">&quot;c&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key2 <span class="string">&quot;d&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SADD key2 <span class="string">&quot;e&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">SDIFF key1 key2</span></span><br><span class="line">1) &quot;a&quot;</span><br><span class="line">2) &quot;b&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="8-应用场景：抽奖活动"><a href="#8-应用场景：抽奖活动" class="headerlink" title="8.应用场景：抽奖活动"></a>8.应用场景：抽奖活动</h3><p>存储某活动中中奖的用户名 ，Set 类型因为有去重功能，可以保证同一个用户不会中奖两次。  </p>
<p>key 为抽奖活动名，value 为员工名称，把所有员工名称放入抽奖箱：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SADD Tom Jerry John Sean Marry Lindy Sary Mark</span><br></pre></td></tr></table></figure>

<p>如果允许重复中奖，可以使用 <code>SRANDMEMBER</code> 命令。</p>
<p><img src="/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/image-20240901195902537.png" alt="image-20240901195902537"></p>
<p>如果不允许重复中奖，可以使用 <code>SPOP</code> 命令。</p>
<p><img src="/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/image-20240901195929408.png" alt="image-20240901195929408"></p>
<h2 id="Sorted-Set：有序集合命令"><a href="#Sorted-Set：有序集合命令" class="headerlink" title="Sorted Set：有序集合命令"></a>Sorted Set：有序集合命令</h2><h3 id="1-ZADD命令"><a href="#1-ZADD命令" class="headerlink" title="1.ZADD命令"></a>1.ZADD命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZADD key [NX | XX] [GT | LT] [CH] [INCR] score member [score member   ...]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：每添加一个元素的时间复杂度为O(log(N))，其中N是有序集合中的元素数量。</li>
<li><strong>作用</strong>：该命令将所有指定的成员以及指定的分数添加到存储在键为key的有序集合中。可以指定多个分数&#x2F;成员对。如果指定的成员已经是有序集合的成员，则更新其分数，并将元素重新插入到正确的位置以确保正确的排序。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 1 <span class="string">&quot;one&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 1 <span class="string">&quot;uno&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 2 <span class="string">&quot;two&quot;</span> 3 <span class="string">&quot;three&quot;</span></span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZRANGE myzset 0 -1 WITHSCORES</span></span><br><span class="line">1) &quot;one&quot;</span><br><span class="line">2) &quot;1&quot;</span><br><span class="line">3) &quot;uno&quot;</span><br><span class="line">4) &quot;1&quot;</span><br><span class="line">5) &quot;two&quot;</span><br><span class="line">6) &quot;2&quot;</span><br><span class="line">7) &quot;three&quot;</span><br><span class="line">8) &quot;3&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="2-ZREM命令"><a href="#2-ZREM命令" class="headerlink" title="2.ZREM命令"></a>2.ZREM命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZREM key member [member ...]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为O(M*log(N))，其中 N 是有序集合中元素的数量，M 是操作中被移除的元素数量。</li>
<li><strong>作用</strong>：该命令从存储在键为key的有序集合中移除指定的成员。不存在的成员将被忽略。当键存在但不持有有序集合时，会返回错误。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 1 <span class="string">&quot;one&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 2 <span class="string">&quot;two&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 3 <span class="string">&quot;three&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZREM myzset <span class="string">&quot;two&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZRANGE myzset 0 -1 WITHSCORES</span></span><br><span class="line">1) &quot;one&quot;</span><br><span class="line">2) &quot;1&quot;</span><br><span class="line">3) &quot;three&quot;</span><br><span class="line">4) &quot;3&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="3-ZSCORE命令"><a href="#3-ZSCORE命令" class="headerlink" title="3.ZSCORE命令"></a>3.ZSCORE命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZSCORE key member</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为O(1)。</li>
<li><strong>作用</strong>：返回键为key的有序集合中成员member的分数。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 1 <span class="string">&quot;one&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZSCORE myzset <span class="string">&quot;one&quot;</span></span></span><br><span class="line">&quot;1&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="4-ZRANK命令"><a href="#4-ZRANK命令" class="headerlink" title="4.ZRANK命令"></a>4.ZRANK命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZRANK key member [WITHSCORE]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为O(log(N))。</li>
<li><strong>作用</strong>：该命令返回存储在键为key的有序集合中的成员的排名，其中分数从低到高排序。排名是从0开始的，这意味着具有最低分数的成员的排名为0。</li>
</ul>
<h3 id="5-ZCARD命令"><a href="#5-ZCARD命令" class="headerlink" title="5.ZCARD命令"></a>5.ZCARD命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZCARD key</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为O(1)。</li>
<li><strong>作用</strong>：该命令返回存储在键为key的有序集合中的元素数量。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 1 <span class="string">&quot;one&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 2 <span class="string">&quot;two&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZCARD myzset</span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="6-ZCOUNT命令"><a href="#6-ZCOUNT命令" class="headerlink" title="6.ZCOUNT命令"></a>6.ZCOUNT命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZCOUNT key min max</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为O(log(N))，其中 N 是有序集合中元素的数量。</li>
<li><strong>作用</strong>：该命令返回键为key的有序集合中分数介于min和max之间的元素数量。</li>
</ul>
<blockquote>
<p>注意：该命令的复杂度仅为O(log(N))，因为它使用元素的排名（参见ZRANK）来获取范围的概念。因此，无需按范围大小进行工作。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 1 <span class="string">&quot;one&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 2 <span class="string">&quot;two&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 3 <span class="string">&quot;three&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZCOUNT myzset -inf +inf</span></span><br><span class="line">(integer) 3</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZCOUNT myzset (1 3</span></span><br><span class="line">(integer) 2</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="7-ZINCRBY命令"><a href="#7-ZINCRBY命令" class="headerlink" title="7.ZINCRBY命令"></a>7.ZINCRBY命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZINCRBY key increment member</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>命令复杂度</strong>：该命令的时间复杂度为O(log(N))，其中 N 是有序集合中元素的数量。</li>
<li><strong>作用</strong>：将存储在键为key的有序集合中的成员的分数增加increment。如果成员不存在于有序集合中，则将其添加到有序集合中，并将increment作为其分数（就好像其先前的分数为0.0）。如果键不存在，则创建一个具有指定成员作为唯一成员的新有序集合。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 1 <span class="string">&quot;one&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 2 <span class="string">&quot;two&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZINCRBY myzset 2 <span class="string">&quot;one&quot;</span></span></span><br><span class="line">&quot;3&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZRANGE myzset 0 -1 WITHSCORES</span></span><br><span class="line">1) &quot;two&quot;</span><br><span class="line">2) &quot;2&quot;</span><br><span class="line">3) &quot;one&quot;</span><br><span class="line">4) &quot;3&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="8-ZRANGE命令"><a href="#8-ZRANGE命令" class="headerlink" title="8.ZRANGE命令"></a>8.ZRANGE命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZRANGE key start stop [BYSCORE | BYLEX] [REV] [LIMIT offset count]   [WITHSCORES]</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>命令复杂度</strong>：该命令的时间复杂度为O(log(N)+M)，其中 N 是有序集合中元素的数量，M 是返回的元素数量。</p>
</li>
<li><p><strong>返回值</strong>：返回存储在指定键处的有序集合中指定范围的元素。</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 1 <span class="string">&quot;one&quot;</span> 2 <span class="string">&quot;two&quot;</span> 3 <span class="string">&quot;three&quot;</span></span></span><br><span class="line">(integer) 3</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZRANGE myzset 0 -1</span></span><br><span class="line">1) &quot;one&quot;</span><br><span class="line">2) &quot;two&quot;</span><br><span class="line">3) &quot;three&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZRANGE myzset 2 3</span></span><br><span class="line">1) &quot;three&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZRANGE myzset -2 -1</span></span><br><span class="line">1) &quot;two&quot;</span><br><span class="line">2) &quot;three&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZRANGE myzset 0 1 WITHSCORES</span></span><br><span class="line">1) &quot;one&quot;</span><br><span class="line">2) &quot;1&quot;</span><br><span class="line">3) &quot;two&quot;</span><br><span class="line">4) &quot;2&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZRANGE myzset (1 +inf BYSCORE LIMIT 1 1</span></span><br><span class="line">1) &quot;three&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="9-ZREMRANGEBYSCORE命令"><a href="#9-ZREMRANGEBYSCORE命令" class="headerlink" title="9.ZREMRANGEBYSCORE命令"></a>9.ZREMRANGEBYSCORE命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZREMRANGEBYSCORE key min max</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>命令复杂度</strong>：该命令的时间复杂度为O(log(N)+M)，其中 N 是有序集合中元素的数量，M 是操作中被移除的元素数量。</p>
</li>
<li><p><strong>作用</strong>：移除存储在指定键处的有序集合中所有分数在min和max之间（包括min和max）的元素。</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 1 <span class="string">&quot;one&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 2 <span class="string">&quot;two&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZADD myzset 3 <span class="string">&quot;three&quot;</span></span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZREMRANGEBYSCORE myzset -inf (2</span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta prompt_">redis&gt; </span><span class="language-bash">ZRANGE myzset 0 -1 WITHSCORES</span></span><br><span class="line">1) &quot;two&quot;</span><br><span class="line">2) &quot;2&quot;</span><br><span class="line">3) &quot;three&quot;</span><br><span class="line">4) &quot;3&quot;</span><br><span class="line"><span class="meta prompt_">redis&gt; </span></span><br></pre></td></tr></table></figure>

<h3 id="10-应用场景：排行榜"><a href="#10-应用场景：排行榜" class="headerlink" title="10.应用场景：排行榜"></a>10.应用场景：排行榜</h3><p>我们以博文点赞排名为例，小林发表了五篇博文，分别获得赞为 200、40、100、50、150。</p>
<p><img src="/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/image-20240901200635587.png" alt="image-20240901200635587"></p>
<p>文章 arcticle:4 新增一个赞，可以使用 <code>ZINCRBY</code> 命令（为有序集合key中元素member的分值加上increment）：</p>
<p><img src="/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/image-20240901200711465.png" alt="image-20240901200711465"></p>
<p>查看某篇文章的赞数，可以使用 <code>ZSCORE</code> 命令（返回有序集合key中元素个数）：</p>
<p><img src="/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/image-20240901200749975.png" alt="image-20240901200749975"></p>
<p>获取小林文章赞数最多的 3 篇文章，可以使用 <code>ZREVRANGE</code> 命令（倒序获取有序集合 key 从start下标到stop下标的元素）：</p>
<p><img src="/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/image-20240901200829472.png" alt="image-20240901200829472"></p>
<p>获取小林 100 赞到 200 赞的文章，可以使用 <code>ZRANGEBYSCORE</code> 命令（返回有序集合中指定分数区间内的成员，分数由低到高排序）：</p>
<p><img src="/imgs/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/image-20240901200906447.png" alt="image-20240901200906447"></p>
<h2 id="Transactions：事务命令"><a href="#Transactions：事务命令" class="headerlink" title="Transactions：事务命令"></a>Transactions：事务命令</h2><p>Redis事务允许将一组命令在单个步骤中执行，它们围绕着<code>MULTI</code>、<code>EXEC</code>、<code>DISCARD</code>和<code>WATCH</code>命令展开。Redis事务提供了两个重要的保证：</p>
<ol>
<li>所有事务中的命令都是<code>串行化</code>的，按顺序执行。在Redis事务的执行过程中，不会为其他客户端发送的请求服务。这保证了命令作为单个隔离操作执行。</li>
<li>EXEC命令触发执行事务中的所有命令，因此如果在事务上下文中的客户端在调用EXEC命令之前失去与服务器的连接，则不会执行任何操作。相反，如果调用了EXEC命令，则会执行所有操作。在使用AOF时，Redis确保使用单个write(2)系统调用将事务写入磁盘。但是，如果Redis服务器崩溃或以某种硬性方式被系统管理员终止，则可能仅注册部分操作。Redis将在重新启动时检测到此情况，并显示错误退出。使用<code>redis-check-aof</code>工具，可以修复追加模式文件，从而删除部分事务，以便服务器可以重新启动。</li>
</ol>
<p>从版本2.2开始，Redis允许在以上两种保证的基础上提供额外的保证，以一种非常类似于<code>检查并设置</code>（CAS）操作的乐观锁定方式。</p>
<p>在Redis中，通过使用MULTI命令可以进入事务。该命令始终会回复OK。在此时，用户可以发出多个命令。而不是立即执行这些命令，Redis会将它们排队。一旦调用EXEC命令，所有命令都将执行。如果调用DISCARD命令，将清空事务队列并退出事务。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">MULTI</span></span><br><span class="line">OK</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">INCR foo</span></span><br><span class="line">QUEUED</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">INCR bar</span></span><br><span class="line">QUEUED</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">EXEC</span></span><br><span class="line">1) (integer) 1</span><br><span class="line">2) (integer) 1</span><br></pre></td></tr></table></figure>

<p>在执行EXEC之后发生的错误不会以特殊方式处理：<code>即使在事务期间某个命令失败，所有其他命令仍将被执行</code>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Trying 127.0.0.1...</span><br><span class="line">Connected to localhost.</span><br><span class="line">Escape character is &#x27;^]&#x27;.</span><br><span class="line">MULTI</span><br><span class="line">+OK</span><br><span class="line">SET a abc</span><br><span class="line">+QUEUED</span><br><span class="line">LPOP a</span><br><span class="line">+QUEUED</span><br><span class="line">EXEC</span><br><span class="line">*2</span><br><span class="line">+OK</span><br><span class="line">-WRONGTYPE Operation against a key holding the wrong kind of value</span><br></pre></td></tr></table></figure>

<p>WATCH用于在Redis事务中提供检查并设置（CAS）行为。被WATCH的键会被监视以侦测对它们的更改。如果在执行EXEC命令之前至少有一个被监视的键被修改，整个事务会中止，并且EXEC返回一个空回复来通知事务失败。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">WATCH mykey</span><br><span class="line">val = GET mykey</span><br><span class="line">val = val + 1</span><br><span class="line">MULTI</span><br><span class="line">SET mykey $val</span><br><span class="line">EXEC</span><br></pre></td></tr></table></figure>

<p>WATCH命令实际上是一个使EXEC变得有条件的命令：我们要求Redis仅在没有任何被WATCH的键被修改时执行事务。这包括客户端进行的修改，如写入命令，以及Redis本身进行的修改，如过期或驱逐。如果在键被WATCH和EXEC接收到之间被修改，则整个事务将被中止。</p>
<blockquote>
<p>事务中的命令不会触发WATCH条件，因为它们只是<code>排队</code>，直到EXEC被发送。当<code>调用EXEC</code>时，所有键都将取消监视，无论事务是否中止。当<code>客户端连接关闭</code>时，所有键都将取消监视。</p>
</blockquote>
<p>WATCH命令可以用来创建Redis原本不支持的新的原子操作的一个很好的例子是实现ZPOP，它是一个以原子方式从有序集合中弹出具有较低分数的元素。以下是最简单的实现方式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">WATCH zset</span><br><span class="line">element = ZRANGE zset 0 0</span><br><span class="line">MULTI</span><br><span class="line">ZREM zset element</span><br><span class="line">EXEC</span><br></pre></td></tr></table></figure>


  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/about/">About</a></li>
        
          <li><a href="/archives/">Writing</a></li>
        
          <li><a href="/tags/">Tag</a></li>
        
          <li><a target="_blank" rel="noopener" href="http://github.com/hulingF">Projects</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4"><span class="toc-number">1.</span> <span class="toc-text">Redis基础命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Generic%EF%BC%9A%E9%80%9A%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.</span> <span class="toc-text">Generic：通用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-DEL%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.DEL命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-EXISTS%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.2.</span> <span class="toc-text">2.EXISTS命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-EXPIRE%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.3.</span> <span class="toc-text">3.EXPIRE命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-KEYS%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.4.</span> <span class="toc-text">4.KEYS命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-OBJECT-ENCODING%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.5.</span> <span class="toc-text">5.OBJECT ENCODING命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-OBJECT-FREQ%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.6.</span> <span class="toc-text">6.OBJECT FREQ命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-PERSIST%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.7.</span> <span class="toc-text">7.PERSIST命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-RENAME%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.8.</span> <span class="toc-text">8.RENAME命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-SCAN%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.9.</span> <span class="toc-text">9.SCAN命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-TTL%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.10.</span> <span class="toc-text">10.TTL命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-TYPE%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.11.</span> <span class="toc-text">11.TYPE命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-UNLINK%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.12.</span> <span class="toc-text">12.UNLINK命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#String%EF%BC%9A%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.</span> <span class="toc-text">String：字符串命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-SET%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.SET命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-GET%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.GET命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-MSET%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.3.</span> <span class="toc-text">3.MSET命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-MGET%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.4.</span> <span class="toc-text">4.MGET命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-INCR%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.5.</span> <span class="toc-text">5.INCR命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-INCRBY%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.6.</span> <span class="toc-text">6.INCRBY命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-INCRBYFLOAT%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.7.</span> <span class="toc-text">7.INCRBYFLOAT命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-STRLEN%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.8.</span> <span class="toc-text">8.STRLEN命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hash%EF%BC%9A%E5%93%88%E5%B8%8C%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.</span> <span class="toc-text">Hash：哈希命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-HSET%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.HSET命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-HGET%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.HGET命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-HGETALL%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.HGETALL命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-HKEYS%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.4.</span> <span class="toc-text">4.HKEYS命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-HVALS%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.5.</span> <span class="toc-text">5.HVALS命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A%E8%B4%AD%E7%89%A9%E8%BD%A6"><span class="toc-number">1.3.6.</span> <span class="toc-text">6.应用场景：购物车</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#List%EF%BC%9A%E5%88%97%E8%A1%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.</span> <span class="toc-text">List：列表命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-LPUSH%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.1.</span> <span class="toc-text">1.LPUSH命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-LPOP%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.2.</span> <span class="toc-text">2.LPOP命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-LRANGE%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.3.</span> <span class="toc-text">3.LRANGE命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-LSET%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.LSET命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-LREM%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.5.</span> <span class="toc-text">5.LREM命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-LMPOP%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.6.</span> <span class="toc-text">6.LMPOP命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-BLPOP%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.7.</span> <span class="toc-text">7.BLPOP命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-LMOVE%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.8.</span> <span class="toc-text">8.LMOVE命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A%E5%8F%AF%E9%9D%A0%E9%98%9F%E5%88%97"><span class="toc-number">1.4.9.</span> <span class="toc-text">9.应用场景：可靠队列</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Set%EF%BC%9A%E9%9B%86%E5%90%88%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.</span> <span class="toc-text">Set：集合命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-SADD%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.1.</span> <span class="toc-text">1.SADD命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-SREM%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.2.</span> <span class="toc-text">2.SREM命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-SCARD%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.3.</span> <span class="toc-text">3.SCARD命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-SISMEMBER%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.4.</span> <span class="toc-text">4.SISMEMBER命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-SINTER%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.5.</span> <span class="toc-text">5.SINTER命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-SUNION%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.6.</span> <span class="toc-text">6.SUNION命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-SDIFF%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.7.</span> <span class="toc-text">7.SDIFF命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A%E6%8A%BD%E5%A5%96%E6%B4%BB%E5%8A%A8"><span class="toc-number">1.5.8.</span> <span class="toc-text">8.应用场景：抽奖活动</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sorted-Set%EF%BC%9A%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.</span> <span class="toc-text">Sorted Set：有序集合命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-ZADD%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.1.</span> <span class="toc-text">1.ZADD命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-ZREM%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.2.</span> <span class="toc-text">2.ZREM命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-ZSCORE%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.3.</span> <span class="toc-text">3.ZSCORE命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-ZRANK%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.4.</span> <span class="toc-text">4.ZRANK命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-ZCARD%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.5.</span> <span class="toc-text">5.ZCARD命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-ZCOUNT%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.6.</span> <span class="toc-text">6.ZCOUNT命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-ZINCRBY%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.7.</span> <span class="toc-text">7.ZINCRBY命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-ZRANGE%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.8.</span> <span class="toc-text">8.ZRANGE命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-ZREMRANGEBYSCORE%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.9.</span> <span class="toc-text">9.ZREMRANGEBYSCORE命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A%E6%8E%92%E8%A1%8C%E6%A6%9C"><span class="toc-number">1.6.10.</span> <span class="toc-text">10.应用场景：排行榜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Transactions%EF%BC%9A%E4%BA%8B%E5%8A%A1%E5%91%BD%E4%BB%A4"><span class="toc-number">1.7.</span> <span class="toc-text">Transactions：事务命令</span></a></li></ol></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&text=Redis基础命令"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&title=Redis基础命令"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&is_video=false&description=Redis基础命令"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Redis基础命令&body=Check out this article: https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&title=Redis基础命令"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&title=Redis基础命令"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&title=Redis基础命令"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&title=Redis基础命令"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&name=Redis基础命令&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://hulingf.github.io/2024/04/17/Redis%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/&t=Redis基础命令"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2024
    hulingF
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/tags/">Tag</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/hulingF">Projects</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'hulingF';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>

<!-- utterances Comments -->

</body>
</html>
